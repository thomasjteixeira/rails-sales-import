#!/usr/bin/env bash
# exit on error
set -o errexit

echo "ğŸ”¨ Starting Render build process..."

# Create storage directory for SQLite
echo "ğŸ“ Creating storage directory..."
mkdir -p storage

# Install dependencies
echo "ğŸ“¦ Installing Ruby gems..."
bundle install

# Setup database and seed
echo "ğŸ—„ï¸ Setting up database..."
RAILS_ENV=production bundle exec rails db:prepare

echo "ğŸŒ± Seeding database with sample data..."
RAILS_ENV=production bundle exec rails db:seed

# Precompile assets
echo "ğŸ¨ Precompiling assets..."
bundle exec rails assets:precompile

# Clean up
echo "ğŸ§¹ Cleaning up..."
bundle exec rails assets:clean

echo "âœ… Build completed successfully!"
